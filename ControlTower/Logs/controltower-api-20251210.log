2025-12-10 15:55:23.427 [INF]  - Starting ControlTower API
2025-12-10 15:55:26.563 [INF] Microsoft.Hosting.Lifetime - Now listening on: https://localhost:7145
2025-12-10 15:55:26.918 [INF] Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-12-10 15:55:26.923 [INF] Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-12-10 15:55:26.927 [INF] Microsoft.Hosting.Lifetime - Content root path: C:\Users\thanthtet.myet\Documents\01_Willowglen\B_001_Workplace\ControlTower\ControlTower\ControlTower
2025-12-10 15:55:47.163 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (103ms) [Parameters=[@__signInDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[ID], [u].[CompanyID], [u].[CreatedBy], [u].[CreatedDate], [u].[DateOfBirth], [u].[DepartmentID], [u].[Email], [u].[EmergencyContactName], [u].[EmergencyContactNumber], [u].[EmergencyRelationship], [u].[FirstName], [u].[Gender], [u].[IsDeleted], [u].[LastLogin], [u].[LastName], [u].[LastWorkingDate], [u].[LoginPassword], [u].[MobileNo], [u].[Nationality], [u].[OccupationID], [u].[OccupationLevelID], [u].[Rating], [u].[Religion], [u].[Remark], [u].[StaffCardID], [u].[StaffRFIDCardID], [u].[StartWorkingDate], [u].[SubDepartmentID], [u].[UpdatedBy], [u].[UpdatedDate], [u].[WorkPassCardExpiredDate], [u].[WorkPassCardIssuedDate], [u].[WorkPassCardNumber], [u].[WorkPermit], [s].[ID], [s].[CreatedBy], [s].[CreatedDate], [s].[DepartmentID], [s].[Description], [s].[IsDeleted], [s].[Name], [s].[Rating], [s].[Remark], [s].[UpdatedBy], [s].[UpdatedDate], [d].[ID], [d].[CreatedBy], [d].[CreatedDate], [d].[Description], [d].[IsDeleted], [d].[Name], [d].[Rating], [d].[Remark], [d].[UpdatedBy], [d].[UpdatedDate], [o].[ID], [o].[CreatedBy], [o].[CreatedDate], [o].[Description], [o].[IsDeleted], [o].[OccupationLevelID], [o].[OccupationName], [o].[Rating], [o].[Remark], [o].[UpdatedBy], [o].[UpdatedDate]
FROM [Users] AS [u]
INNER JOIN [SubDepartments] AS [s] ON [u].[SubDepartmentID] = [s].[ID]
INNER JOIN [Departments] AS [d] ON [s].[DepartmentID] = [d].[ID]
INNER JOIN [Occupations] AS [o] ON [u].[OccupationID] = [o].[ID]
WHERE [u].[Email] = @__signInDto_Email_0 AND [u].[IsDeleted] = CAST(0 AS bit)
2025-12-10 15:55:48.432 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (23ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [LastLogin] = @p0
OUTPUT 1
WHERE [ID] = @p1;
2025-12-10 15:55:48.498 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (10ms) [Parameters=[@__applicationName_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[ID], [a].[ApplicationName], [a].[CreatedBy], [a].[CreatedDate], [a].[Description], [a].[IsDeleted], [a].[Rating], [a].[Remark], [a].[UpdatedBy], [a].[UpdatedDate]
FROM [Applications] AS [a]
WHERE [a].[ApplicationName] = @__applicationName_0 AND [a].[IsDeleted] = CAST(0 AS bit)
2025-12-10 15:55:48.586 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (15ms) [Parameters=[@__user_ID_0='?' (DbType = Guid), @__newsPortalApp_ID_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[ID], [u].[AccessLevelID], [u].[ApplicationID], [u].[CreatedBy], [u].[CreatedDate], [u].[GrantedBy], [u].[GrantedDate], [u].[IsDeleted], [u].[IsRevoked], [u].[Remark], [u].[RevokedDate], [u].[UpdatedBy], [u].[UpdatedDate], [u].[UserID], [a].[ID], [a].[CreatedBy], [a].[CreatedDate], [a].[Description], [a].[IsDeleted], [a].[LevelName], [a].[UpdatedBy], [a].[UpdatedDate]
FROM [UserApplicationAccesses] AS [u]
INNER JOIN [AccessLevels] AS [a] ON [u].[AccessLevelID] = [a].[ID]
WHERE [u].[UserID] = @__user_ID_0 AND [u].[ApplicationID] = @__newsPortalApp_ID_1 AND [u].[IsDeleted] = CAST(0 AS bit) AND [u].[IsRevoked] = CAST(0 AS bit)
2025-12-10 15:55:49.052 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ID], [a].[ApplicationName], [a].[Description], [a].[Remark], [a].[Rating], [a].[CreatedDate], [a].[UpdatedDate], CASE
    WHEN [u].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[FirstName], [u].[LastName], CASE
    WHEN [u0].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u0].[FirstName], [u0].[LastName]
FROM [Applications] AS [a]
LEFT JOIN [Users] AS [u] ON [a].[CreatedBy] = [u].[ID]
LEFT JOIN [Users] AS [u0] ON [a].[UpdatedBy] = [u0].[ID]
WHERE [a].[IsDeleted] = CAST(0 AS bit)
2025-12-10 15:55:49.181 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ID], [a].[ApplicationName], [a].[Description], [a].[Remark], [a].[Rating], [a].[CreatedDate], [a].[UpdatedDate], CASE
    WHEN [u].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[FirstName], [u].[LastName], CASE
    WHEN [u0].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u0].[FirstName], [u0].[LastName]
FROM [Applications] AS [a]
LEFT JOIN [Users] AS [u] ON [a].[CreatedBy] = [u].[ID]
LEFT JOIN [Users] AS [u0] ON [a].[UpdatedBy] = [u0].[ID]
WHERE [a].[IsDeleted] = CAST(0 AS bit)
2025-12-10 15:55:49.225 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (25ms) [Parameters=[@__employeeId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[ID], [u].[UserID], [u].[ApplicationID], [u].[AccessLevelID], [u].[GrantedDate], [u].[IsRevoked], [u].[RevokedDate], [u].[GrantedBy], [u].[Remark], [u].[CreatedDate], [u].[UpdatedDate], [u0].[FirstName], [u0].[LastName], [u0].[StaffCardID], [a].[ApplicationName], CASE
    WHEN [u1].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u1].[FirstName], [u1].[LastName], CASE
    WHEN [u2].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u2].[FirstName], [u2].[LastName], CASE
    WHEN [u3].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u3].[FirstName], [u3].[LastName]
FROM [UserApplicationAccesses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserID] = [u0].[ID]
INNER JOIN [Applications] AS [a] ON [u].[ApplicationID] = [a].[ID]
LEFT JOIN [Users] AS [u1] ON [u].[GrantedBy] = [u1].[ID]
LEFT JOIN [Users] AS [u2] ON [u].[CreatedBy] = [u2].[ID]
LEFT JOIN [Users] AS [u3] ON [u].[UpdatedBy] = [u3].[ID]
WHERE [u].[UserID] = @__employeeId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
2025-12-10 15:55:49.277 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (6ms) [Parameters=[@__employeeId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[ID], [u].[UserID], [u].[ApplicationID], [u].[AccessLevelID], [u].[GrantedDate], [u].[IsRevoked], [u].[RevokedDate], [u].[GrantedBy], [u].[Remark], [u].[CreatedDate], [u].[UpdatedDate], [u0].[FirstName], [u0].[LastName], [u0].[StaffCardID], [a].[ApplicationName], CASE
    WHEN [u1].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u1].[FirstName], [u1].[LastName], CASE
    WHEN [u2].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u2].[FirstName], [u2].[LastName], CASE
    WHEN [u3].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u3].[FirstName], [u3].[LastName]
FROM [UserApplicationAccesses] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserID] = [u0].[ID]
INNER JOIN [Applications] AS [a] ON [u].[ApplicationID] = [a].[ID]
LEFT JOIN [Users] AS [u1] ON [u].[GrantedBy] = [u1].[ID]
LEFT JOIN [Users] AS [u2] ON [u].[CreatedBy] = [u2].[ID]
LEFT JOIN [Users] AS [u3] ON [u].[UpdatedBy] = [u3].[ID]
WHERE [u].[UserID] = @__employeeId_0 AND [u].[IsDeleted] = CAST(0 AS bit)
2025-12-10 15:55:52.364 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ID], [r].[Name], [r].[IsDeleted], [r].[CreatedDate], [r].[UpdatedDate], [r].[CreatedBy], [r].[UpdatedBy], CASE
    WHEN [u].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[FirstName], [u].[LastName], CASE
    WHEN [u0].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u0].[FirstName], [u0].[LastName]
FROM [ReportFormTypes] AS [r]
LEFT JOIN [Users] AS [u] ON [r].[CreatedBy] = [u].[ID]
LEFT JOIN [Users] AS [u0] ON [r].[UpdatedBy] = [u0].[ID]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
2025-12-10 15:55:52.390 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ID], [r].[Name], [r].[IsDeleted], [r].[CreatedDate], [r].[UpdatedDate], [r].[CreatedBy], [r].[UpdatedBy], CASE
    WHEN [u].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[FirstName], [u].[LastName], CASE
    WHEN [u0].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u0].[FirstName], [u0].[LastName]
FROM [ReportFormTypes] AS [r]
LEFT JOIN [Users] AS [u] ON [r].[CreatedBy] = [u].[ID]
LEFT JOIN [Users] AS [u0] ON [r].[UpdatedBy] = [u0].[ID]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
2025-12-10 15:55:52.404 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [ReportForms] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
2025-12-10 15:55:52.601 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (99ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r1].[ID], [r1].[ReportFormTypeID], [r0].[Name], [r1].[JobNo], [r1].[SystemNameWarehouseID], [s].[Name], [r1].[StationNameWarehouseID], [s0].[Name], (
    SELECT TOP(1) [c].[Customer]
    FROM [CMReportForms] AS [c]
    WHERE [c].[ReportFormID] = [r1].[ID] AND [c].[IsDeleted] = CAST(0 AS bit)), (
    SELECT TOP(1) [c0].[ProjectNo]
    FROM [CMReportForms] AS [c0]
    WHERE [c0].[ReportFormID] = [r1].[ID] AND [c0].[IsDeleted] = CAST(0 AS bit)), [r1].[IsDeleted], [r1].[CreatedDate], [r1].[UpdatedDate], [r1].[CreatedBy], [u].[FirstName] + N' ' + [u].[LastName], [r1].[UpdatedBy], CASE
    WHEN [u0].[ID] IS NOT NULL THEN COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'')
END, [r1].[UploadStatus], [r1].[UploadHostname], [r1].[UploadIPAddress], [r1].[FormStatus], [s2].[PMReportFormTypeID], [s2].[TypeName], [s2].[Customer], [s2].[ProjectNo], [s2].[FormStatusName], [s2].[c], [s4].[PMReportFormTypeID], [s4].[TypeName], [s4].[Customer], [s4].[ProjectNo], [s4].[FormStatusName], [s4].[c], [s6].[CMReportFormTypeID], [s6].[TypeName], [s6].[FormStatusName], [s6].[c]
FROM (
    SELECT [r].[ID], [r].[CreatedBy], [r].[CreatedDate], [r].[FormStatus], [r].[IsDeleted], [r].[JobNo], [r].[ReportFormTypeID], [r].[StationNameWarehouseID], [r].[SystemNameWarehouseID], [r].[UpdatedBy], [r].[UpdatedDate], [r].[UploadHostname], [r].[UploadIPAddress], [r].[UploadStatus]
    FROM [ReportForms] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [r].[CreatedDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r1]
INNER JOIN [ReportFormTypes] AS [r0] ON [r1].[ReportFormTypeID] = [r0].[ID]
INNER JOIN [SystemNameWarehouses] AS [s] ON [r1].[SystemNameWarehouseID] = [s].[ID]
INNER JOIN [StationNameWarehouses] AS [s0] ON [r1].[StationNameWarehouseID] = [s0].[ID]
INNER JOIN [Users] AS [u] ON [r1].[CreatedBy] = [u].[ID]
LEFT JOIN [Users] AS [u0] ON [r1].[UpdatedBy] = [u0].[ID]
LEFT JOIN (
    SELECT [s1].[PMReportFormTypeID], [s1].[TypeName], [s1].[Customer], [s1].[ProjectNo], [s1].[FormStatusName], [s1].[c], [s1].[ReportFormID]
    FROM (
        SELECT [p].[PMReportFormTypeID], [p0].[Name] AS [TypeName], [p].[Customer], [p].[ProjectNo], [f].[Name] AS [FormStatusName], 1 AS [c], [p].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [p].[ReportFormID] ORDER BY [p].[ID], [p0].[ID], [f].[ID]) AS [row]
        FROM [PMReportFormRTU] AS [p]
        INNER JOIN [PMReportFormTypes] AS [p0] ON [p].[PMReportFormTypeID] = [p0].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f] ON [p].[FormstatusID] = [f].[ID]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [s1]
    WHERE [s1].[row] <= 1
) AS [s2] ON [r1].[ID] = [s2].[ReportFormID]
LEFT JOIN (
    SELECT [s3].[PMReportFormTypeID], [s3].[TypeName], [s3].[Customer], [s3].[ProjectNo], [s3].[FormStatusName], [s3].[c], [s3].[ReportFormID]
    FROM (
        SELECT [p1].[PMReportFormTypeID], [p2].[Name] AS [TypeName], [p1].[Customer], [p1].[ProjectNo], [f0].[Name] AS [FormStatusName], 1 AS [c], [p1].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [p1].[ReportFormID] ORDER BY [p1].[ID], [p2].[ID], [f0].[ID]) AS [row]
        FROM [PMReportFormServer] AS [p1]
        INNER JOIN [PMReportFormTypes] AS [p2] ON [p1].[PMReportFormTypeID] = [p2].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f0] ON [p1].[FormstatusID] = [f0].[ID]
        WHERE [p1].[IsDeleted] = CAST(0 AS bit)
    ) AS [s3]
    WHERE [s3].[row] <= 1
) AS [s4] ON [r1].[ID] = [s4].[ReportFormID]
LEFT JOIN (
    SELECT [s5].[CMReportFormTypeID], [s5].[TypeName], [s5].[FormStatusName], [s5].[c], [s5].[ReportFormID]
    FROM (
        SELECT [c1].[CMReportFormTypeID], [c2].[Name] AS [TypeName], [f1].[Name] AS [FormStatusName], 1 AS [c], [c1].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [c1].[ReportFormID] ORDER BY [c1].[ID], [c2].[ID], [f1].[ID]) AS [row]
        FROM [CMReportForms] AS [c1]
        INNER JOIN [CMReportFormTypes] AS [c2] ON [c1].[CMReportFormTypeID] = [c2].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f1] ON [c1].[FormstatusID] = [f1].[ID]
        WHERE [c1].[IsDeleted] = CAST(0 AS bit)
    ) AS [s5]
    WHERE [s5].[row] <= 1
) AS [s6] ON [r1].[ID] = [s6].[ReportFormID]
ORDER BY [r1].[CreatedDate] DESC
2025-12-10 15:55:52.654 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [ReportForms] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
2025-12-10 15:55:52.677 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r1].[ID], [r1].[ReportFormTypeID], [r0].[Name], [r1].[JobNo], [r1].[SystemNameWarehouseID], [s].[Name], [r1].[StationNameWarehouseID], [s0].[Name], (
    SELECT TOP(1) [c].[Customer]
    FROM [CMReportForms] AS [c]
    WHERE [c].[ReportFormID] = [r1].[ID] AND [c].[IsDeleted] = CAST(0 AS bit)), (
    SELECT TOP(1) [c0].[ProjectNo]
    FROM [CMReportForms] AS [c0]
    WHERE [c0].[ReportFormID] = [r1].[ID] AND [c0].[IsDeleted] = CAST(0 AS bit)), [r1].[IsDeleted], [r1].[CreatedDate], [r1].[UpdatedDate], [r1].[CreatedBy], [u].[FirstName] + N' ' + [u].[LastName], [r1].[UpdatedBy], CASE
    WHEN [u0].[ID] IS NOT NULL THEN COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'')
END, [r1].[UploadStatus], [r1].[UploadHostname], [r1].[UploadIPAddress], [r1].[FormStatus], [s2].[PMReportFormTypeID], [s2].[TypeName], [s2].[Customer], [s2].[ProjectNo], [s2].[FormStatusName], [s2].[c], [s4].[PMReportFormTypeID], [s4].[TypeName], [s4].[Customer], [s4].[ProjectNo], [s4].[FormStatusName], [s4].[c], [s6].[CMReportFormTypeID], [s6].[TypeName], [s6].[FormStatusName], [s6].[c]
FROM (
    SELECT [r].[ID], [r].[CreatedBy], [r].[CreatedDate], [r].[FormStatus], [r].[IsDeleted], [r].[JobNo], [r].[ReportFormTypeID], [r].[StationNameWarehouseID], [r].[SystemNameWarehouseID], [r].[UpdatedBy], [r].[UpdatedDate], [r].[UploadHostname], [r].[UploadIPAddress], [r].[UploadStatus]
    FROM [ReportForms] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [r].[CreatedDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r1]
INNER JOIN [ReportFormTypes] AS [r0] ON [r1].[ReportFormTypeID] = [r0].[ID]
INNER JOIN [SystemNameWarehouses] AS [s] ON [r1].[SystemNameWarehouseID] = [s].[ID]
INNER JOIN [StationNameWarehouses] AS [s0] ON [r1].[StationNameWarehouseID] = [s0].[ID]
INNER JOIN [Users] AS [u] ON [r1].[CreatedBy] = [u].[ID]
LEFT JOIN [Users] AS [u0] ON [r1].[UpdatedBy] = [u0].[ID]
LEFT JOIN (
    SELECT [s1].[PMReportFormTypeID], [s1].[TypeName], [s1].[Customer], [s1].[ProjectNo], [s1].[FormStatusName], [s1].[c], [s1].[ReportFormID]
    FROM (
        SELECT [p].[PMReportFormTypeID], [p0].[Name] AS [TypeName], [p].[Customer], [p].[ProjectNo], [f].[Name] AS [FormStatusName], 1 AS [c], [p].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [p].[ReportFormID] ORDER BY [p].[ID], [p0].[ID], [f].[ID]) AS [row]
        FROM [PMReportFormRTU] AS [p]
        INNER JOIN [PMReportFormTypes] AS [p0] ON [p].[PMReportFormTypeID] = [p0].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f] ON [p].[FormstatusID] = [f].[ID]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [s1]
    WHERE [s1].[row] <= 1
) AS [s2] ON [r1].[ID] = [s2].[ReportFormID]
LEFT JOIN (
    SELECT [s3].[PMReportFormTypeID], [s3].[TypeName], [s3].[Customer], [s3].[ProjectNo], [s3].[FormStatusName], [s3].[c], [s3].[ReportFormID]
    FROM (
        SELECT [p1].[PMReportFormTypeID], [p2].[Name] AS [TypeName], [p1].[Customer], [p1].[ProjectNo], [f0].[Name] AS [FormStatusName], 1 AS [c], [p1].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [p1].[ReportFormID] ORDER BY [p1].[ID], [p2].[ID], [f0].[ID]) AS [row]
        FROM [PMReportFormServer] AS [p1]
        INNER JOIN [PMReportFormTypes] AS [p2] ON [p1].[PMReportFormTypeID] = [p2].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f0] ON [p1].[FormstatusID] = [f0].[ID]
        WHERE [p1].[IsDeleted] = CAST(0 AS bit)
    ) AS [s3]
    WHERE [s3].[row] <= 1
) AS [s4] ON [r1].[ID] = [s4].[ReportFormID]
LEFT JOIN (
    SELECT [s5].[CMReportFormTypeID], [s5].[TypeName], [s5].[FormStatusName], [s5].[c], [s5].[ReportFormID]
    FROM (
        SELECT [c1].[CMReportFormTypeID], [c2].[Name] AS [TypeName], [f1].[Name] AS [FormStatusName], 1 AS [c], [c1].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [c1].[ReportFormID] ORDER BY [c1].[ID], [c2].[ID], [f1].[ID]) AS [row]
        FROM [CMReportForms] AS [c1]
        INNER JOIN [CMReportFormTypes] AS [c2] ON [c1].[CMReportFormTypeID] = [c2].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f1] ON [c1].[FormstatusID] = [f1].[ID]
        WHERE [c1].[IsDeleted] = CAST(0 AS bit)
    ) AS [s5]
    WHERE [s5].[row] <= 1
) AS [s6] ON [r1].[ID] = [s6].[ReportFormID]
ORDER BY [r1].[CreatedDate] DESC
2025-12-10 17:22:26.433 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [ReportForms] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
2025-12-10 17:22:26.451 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ID], [r].[Name], [r].[IsDeleted], [r].[CreatedDate], [r].[UpdatedDate], [r].[CreatedBy], [r].[UpdatedBy], CASE
    WHEN [u].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[FirstName], [u].[LastName], CASE
    WHEN [u0].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u0].[FirstName], [u0].[LastName]
FROM [ReportFormTypes] AS [r]
LEFT JOIN [Users] AS [u] ON [r].[CreatedBy] = [u].[ID]
LEFT JOIN [Users] AS [u0] ON [r].[UpdatedBy] = [u0].[ID]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
2025-12-10 17:22:26.476 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ID], [r].[Name], [r].[IsDeleted], [r].[CreatedDate], [r].[UpdatedDate], [r].[CreatedBy], [r].[UpdatedBy], CASE
    WHEN [u].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u].[FirstName], [u].[LastName], CASE
    WHEN [u0].[ID] IS NOT NULL THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END, [u0].[FirstName], [u0].[LastName]
FROM [ReportFormTypes] AS [r]
LEFT JOIN [Users] AS [u] ON [r].[CreatedBy] = [u].[ID]
LEFT JOIN [Users] AS [u0] ON [r].[UpdatedBy] = [u0].[ID]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
2025-12-10 17:22:26.564 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (111ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r1].[ID], [r1].[ReportFormTypeID], [r0].[Name], [r1].[JobNo], [r1].[SystemNameWarehouseID], [s].[Name], [r1].[StationNameWarehouseID], [s0].[Name], (
    SELECT TOP(1) [c].[Customer]
    FROM [CMReportForms] AS [c]
    WHERE [c].[ReportFormID] = [r1].[ID] AND [c].[IsDeleted] = CAST(0 AS bit)), (
    SELECT TOP(1) [c0].[ProjectNo]
    FROM [CMReportForms] AS [c0]
    WHERE [c0].[ReportFormID] = [r1].[ID] AND [c0].[IsDeleted] = CAST(0 AS bit)), [r1].[IsDeleted], [r1].[CreatedDate], [r1].[UpdatedDate], [r1].[CreatedBy], [u].[FirstName] + N' ' + [u].[LastName], [r1].[UpdatedBy], CASE
    WHEN [u0].[ID] IS NOT NULL THEN COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'')
END, [r1].[UploadStatus], [r1].[UploadHostname], [r1].[UploadIPAddress], [r1].[FormStatus], [s2].[PMReportFormTypeID], [s2].[TypeName], [s2].[Customer], [s2].[ProjectNo], [s2].[FormStatusName], [s2].[c], [s4].[PMReportFormTypeID], [s4].[TypeName], [s4].[Customer], [s4].[ProjectNo], [s4].[FormStatusName], [s4].[c], [s6].[CMReportFormTypeID], [s6].[TypeName], [s6].[FormStatusName], [s6].[c]
FROM (
    SELECT [r].[ID], [r].[CreatedBy], [r].[CreatedDate], [r].[FormStatus], [r].[IsDeleted], [r].[JobNo], [r].[ReportFormTypeID], [r].[StationNameWarehouseID], [r].[SystemNameWarehouseID], [r].[UpdatedBy], [r].[UpdatedDate], [r].[UploadHostname], [r].[UploadIPAddress], [r].[UploadStatus]
    FROM [ReportForms] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [r].[CreatedDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r1]
INNER JOIN [ReportFormTypes] AS [r0] ON [r1].[ReportFormTypeID] = [r0].[ID]
INNER JOIN [SystemNameWarehouses] AS [s] ON [r1].[SystemNameWarehouseID] = [s].[ID]
INNER JOIN [StationNameWarehouses] AS [s0] ON [r1].[StationNameWarehouseID] = [s0].[ID]
INNER JOIN [Users] AS [u] ON [r1].[CreatedBy] = [u].[ID]
LEFT JOIN [Users] AS [u0] ON [r1].[UpdatedBy] = [u0].[ID]
LEFT JOIN (
    SELECT [s1].[PMReportFormTypeID], [s1].[TypeName], [s1].[Customer], [s1].[ProjectNo], [s1].[FormStatusName], [s1].[c], [s1].[ReportFormID]
    FROM (
        SELECT [p].[PMReportFormTypeID], [p0].[Name] AS [TypeName], [p].[Customer], [p].[ProjectNo], [f].[Name] AS [FormStatusName], 1 AS [c], [p].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [p].[ReportFormID] ORDER BY [p].[ID], [p0].[ID], [f].[ID]) AS [row]
        FROM [PMReportFormRTU] AS [p]
        INNER JOIN [PMReportFormTypes] AS [p0] ON [p].[PMReportFormTypeID] = [p0].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f] ON [p].[FormstatusID] = [f].[ID]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [s1]
    WHERE [s1].[row] <= 1
) AS [s2] ON [r1].[ID] = [s2].[ReportFormID]
LEFT JOIN (
    SELECT [s3].[PMReportFormTypeID], [s3].[TypeName], [s3].[Customer], [s3].[ProjectNo], [s3].[FormStatusName], [s3].[c], [s3].[ReportFormID]
    FROM (
        SELECT [p1].[PMReportFormTypeID], [p2].[Name] AS [TypeName], [p1].[Customer], [p1].[ProjectNo], [f0].[Name] AS [FormStatusName], 1 AS [c], [p1].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [p1].[ReportFormID] ORDER BY [p1].[ID], [p2].[ID], [f0].[ID]) AS [row]
        FROM [PMReportFormServer] AS [p1]
        INNER JOIN [PMReportFormTypes] AS [p2] ON [p1].[PMReportFormTypeID] = [p2].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f0] ON [p1].[FormstatusID] = [f0].[ID]
        WHERE [p1].[IsDeleted] = CAST(0 AS bit)
    ) AS [s3]
    WHERE [s3].[row] <= 1
) AS [s4] ON [r1].[ID] = [s4].[ReportFormID]
LEFT JOIN (
    SELECT [s5].[CMReportFormTypeID], [s5].[TypeName], [s5].[FormStatusName], [s5].[c], [s5].[ReportFormID]
    FROM (
        SELECT [c1].[CMReportFormTypeID], [c2].[Name] AS [TypeName], [f1].[Name] AS [FormStatusName], 1 AS [c], [c1].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [c1].[ReportFormID] ORDER BY [c1].[ID], [c2].[ID], [f1].[ID]) AS [row]
        FROM [CMReportForms] AS [c1]
        INNER JOIN [CMReportFormTypes] AS [c2] ON [c1].[CMReportFormTypeID] = [c2].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f1] ON [c1].[FormstatusID] = [f1].[ID]
        WHERE [c1].[IsDeleted] = CAST(0 AS bit)
    ) AS [s5]
    WHERE [s5].[row] <= 1
) AS [s6] ON [r1].[ID] = [s6].[ReportFormID]
ORDER BY [r1].[CreatedDate] DESC
2025-12-10 17:22:26.584 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [ReportForms] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
2025-12-10 17:22:26.598 [INF] Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r1].[ID], [r1].[ReportFormTypeID], [r0].[Name], [r1].[JobNo], [r1].[SystemNameWarehouseID], [s].[Name], [r1].[StationNameWarehouseID], [s0].[Name], (
    SELECT TOP(1) [c].[Customer]
    FROM [CMReportForms] AS [c]
    WHERE [c].[ReportFormID] = [r1].[ID] AND [c].[IsDeleted] = CAST(0 AS bit)), (
    SELECT TOP(1) [c0].[ProjectNo]
    FROM [CMReportForms] AS [c0]
    WHERE [c0].[ReportFormID] = [r1].[ID] AND [c0].[IsDeleted] = CAST(0 AS bit)), [r1].[IsDeleted], [r1].[CreatedDate], [r1].[UpdatedDate], [r1].[CreatedBy], [u].[FirstName] + N' ' + [u].[LastName], [r1].[UpdatedBy], CASE
    WHEN [u0].[ID] IS NOT NULL THEN COALESCE([u0].[FirstName], N'') + N' ' + COALESCE([u0].[LastName], N'')
END, [r1].[UploadStatus], [r1].[UploadHostname], [r1].[UploadIPAddress], [r1].[FormStatus], [s2].[PMReportFormTypeID], [s2].[TypeName], [s2].[Customer], [s2].[ProjectNo], [s2].[FormStatusName], [s2].[c], [s4].[PMReportFormTypeID], [s4].[TypeName], [s4].[Customer], [s4].[ProjectNo], [s4].[FormStatusName], [s4].[c], [s6].[CMReportFormTypeID], [s6].[TypeName], [s6].[FormStatusName], [s6].[c]
FROM (
    SELECT [r].[ID], [r].[CreatedBy], [r].[CreatedDate], [r].[FormStatus], [r].[IsDeleted], [r].[JobNo], [r].[ReportFormTypeID], [r].[StationNameWarehouseID], [r].[SystemNameWarehouseID], [r].[UpdatedBy], [r].[UpdatedDate], [r].[UploadHostname], [r].[UploadIPAddress], [r].[UploadStatus]
    FROM [ReportForms] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
    ORDER BY [r].[CreatedDate] DESC
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [r1]
INNER JOIN [ReportFormTypes] AS [r0] ON [r1].[ReportFormTypeID] = [r0].[ID]
INNER JOIN [SystemNameWarehouses] AS [s] ON [r1].[SystemNameWarehouseID] = [s].[ID]
INNER JOIN [StationNameWarehouses] AS [s0] ON [r1].[StationNameWarehouseID] = [s0].[ID]
INNER JOIN [Users] AS [u] ON [r1].[CreatedBy] = [u].[ID]
LEFT JOIN [Users] AS [u0] ON [r1].[UpdatedBy] = [u0].[ID]
LEFT JOIN (
    SELECT [s1].[PMReportFormTypeID], [s1].[TypeName], [s1].[Customer], [s1].[ProjectNo], [s1].[FormStatusName], [s1].[c], [s1].[ReportFormID]
    FROM (
        SELECT [p].[PMReportFormTypeID], [p0].[Name] AS [TypeName], [p].[Customer], [p].[ProjectNo], [f].[Name] AS [FormStatusName], 1 AS [c], [p].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [p].[ReportFormID] ORDER BY [p].[ID], [p0].[ID], [f].[ID]) AS [row]
        FROM [PMReportFormRTU] AS [p]
        INNER JOIN [PMReportFormTypes] AS [p0] ON [p].[PMReportFormTypeID] = [p0].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f] ON [p].[FormstatusID] = [f].[ID]
        WHERE [p].[IsDeleted] = CAST(0 AS bit)
    ) AS [s1]
    WHERE [s1].[row] <= 1
) AS [s2] ON [r1].[ID] = [s2].[ReportFormID]
LEFT JOIN (
    SELECT [s3].[PMReportFormTypeID], [s3].[TypeName], [s3].[Customer], [s3].[ProjectNo], [s3].[FormStatusName], [s3].[c], [s3].[ReportFormID]
    FROM (
        SELECT [p1].[PMReportFormTypeID], [p2].[Name] AS [TypeName], [p1].[Customer], [p1].[ProjectNo], [f0].[Name] AS [FormStatusName], 1 AS [c], [p1].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [p1].[ReportFormID] ORDER BY [p1].[ID], [p2].[ID], [f0].[ID]) AS [row]
        FROM [PMReportFormServer] AS [p1]
        INNER JOIN [PMReportFormTypes] AS [p2] ON [p1].[PMReportFormTypeID] = [p2].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f0] ON [p1].[FormstatusID] = [f0].[ID]
        WHERE [p1].[IsDeleted] = CAST(0 AS bit)
    ) AS [s3]
    WHERE [s3].[row] <= 1
) AS [s4] ON [r1].[ID] = [s4].[ReportFormID]
LEFT JOIN (
    SELECT [s5].[CMReportFormTypeID], [s5].[TypeName], [s5].[FormStatusName], [s5].[c], [s5].[ReportFormID]
    FROM (
        SELECT [c1].[CMReportFormTypeID], [c2].[Name] AS [TypeName], [f1].[Name] AS [FormStatusName], 1 AS [c], [c1].[ReportFormID], ROW_NUMBER() OVER(PARTITION BY [c1].[ReportFormID] ORDER BY [c1].[ID], [c2].[ID], [f1].[ID]) AS [row]
        FROM [CMReportForms] AS [c1]
        INNER JOIN [CMReportFormTypes] AS [c2] ON [c1].[CMReportFormTypeID] = [c2].[ID]
        INNER JOIN [FormStatusWarehouses] AS [f1] ON [c1].[FormstatusID] = [f1].[ID]
        WHERE [c1].[IsDeleted] = CAST(0 AS bit)
    ) AS [s5]
    WHERE [s5].[row] <= 1
) AS [s6] ON [r1].[ID] = [s6].[ReportFormID]
ORDER BY [r1].[CreatedDate] DESC
